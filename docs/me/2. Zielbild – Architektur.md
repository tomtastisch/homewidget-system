# Finales Zielbild – Architektur, Technologien, Modellierung und Systemstruktur

Das Ziel dieses Projekts ist der Aufbau eines modernen, intelligent gesteuerten Home-Widget-Systems, das Inhalte für
unterschiedliche Nutzergruppen dynamisch, sicher und performant bereitstellt. Die Architektur soll einerseits kompakt
genug sein, um als Proof-of-Concept effizient umgesetzt zu werden, andererseits tragfähig genug, um später als Fundament
für reale Produktivsysteme dienen zu können.

Die Leitlinie lautet:  
**modular, sicher, erweiterbar, domänengesteuert, zukunftsfähig.**

---

# Eingesetzte Sprachen und Frameworks

## Programmiersprachen

- **Python**  
  Kernsprache des Backends, geeignet für schnelle Entwicklung, klare Typisierung (Pydantic/SQLModel) und moderne
  Web-Frameworks.

- **TypeScript / JavaScript**  
  Für das mobile Frontend via React Native. TypeScript sorgt für frühzeitige Fehlererkennung und saubere Typstrukturen.

Diese Kombination ermöglicht ein starkes Backend sowie ein performantes, plattformübergreifendes Mobile-Frontend.

---

# Backend-Technologien

## **FastAPI (Python)**

Schnelles, modernes Web-Framework für:

- API-Routing
- Request-/Response-Modelle
- automatische OpenAPI-Dokumentation
- klar strukturierte Abhängigkeiten

Es bildet die saubere Transport- und Schnittstellenschicht des Systems.

## **SQLModel (Python)**

ORM + Datenvalidierung in einem:

- typisierte Modelle
- einfache Migrationen
- Strukturierung der Persistenz
- klare Entitäten für User, Widgets, Tokens

## **Argon2id**

Passwort-Hashing nach aktuellem OWASP-Standard:

- robust
- zukunftssicher
- geschützt gegen GPU-basierte Brute-Force-Angriffe

## **JWT (Access- & Refresh-Token)**

Authentifizierungsmechanismus mit:

- kurzlebigen Access-Tokens
- langlebigen Refresh-Tokens
- rollenbasierter Kontrolle

## **OAuth2PasswordBearer**

Sorgt für die standardisierte Tokenextraktion aus HTTP-Anfragen.

## **fastapi-cache2**

Ermöglicht:

- schnellere Home-Feed-Erstellung
- Reduktion der Datenbanklast
- TTL-basierte Performanceverbesserung

## **In-Memory Rate-Limiting (Python)**

Schützt kritische Endpunkte:

- Login
- Home-Feed
- mögliche Missbrauchsmuster

---

# Mobile Technologies

## **React Native (TypeScript, Expo)**

Cross-Platform-Framework für:

- die Darstellung der Widgets
- Navigation
- API-Kommunikation
- Benutzerinteraktionen

Es trennt UI und Backend strikt – die App konsumiert lediglich definierte Datenstrukturen.

## **expo-secure-store**

Sichere Speicherung von:

- Access Token
- Refresh Token

Ermöglicht stabile mobile Sessions ohne Sicherheitsrisiken.

---

# Architekturprinzipien und Muster

## 1. Domain-zentrierte Modellierung

Der fachliche Kern (Widgets, Nutzerrollen, Sichtbarkeitsregeln) liegt in einem isolierten Domain Layer:

- Entities
- Value Objects
- Domain Services
- Regeln zur Widget-Selektion und Priorisierung

Dadurch bleibt das System nachvollziehbar und fachlich konsistent.

---

## 2. Sechs Schichten mit klaren Verantwortlichkeiten

1. **Transport (FastAPI)**
2. **Security (Argon2, JWT, OAuth2)**
3. **Domain (Widget-/Nutzerlogik)**
4. **Persistence (SQLModel + Repositories)**
5. **Infrastructure (Cache, Rate-Limit, Config)**
6. **Client (React Native, Secure Store)**

Die Schichten sind bewusst entkoppelt und bilden eine langfristig tragfähige Struktur.

---

# Geplante Modellierung

## Entities

### User

- id
- email
- hashed_password
- role (DEMO / COMMON / PREMIUM)

### Widget

- id
- type
- priority
- visibility_rules
- payload

### RefreshToken

- token
- user_id
- expiry

## Domain Services

- HomeFeedService
- WidgetSelectionService
- AuthService

Diese Services steuern alle fachlichen Prozesse.

---

# Systemsteuerung

## Request-Fluss

1. Mobile App sendet Anfrage
2. API Gateway (Rate-Limit)
3. FastAPI verarbeitet Routing
4. OAuth2 extrahiert Token
5. Security validiert Nutzer
6. Domain selektiert Widgets
7. Cache liefert vorberechneten Feed (falls vorhanden)
8. Mobile App rendert Widgets dynamisch

---

# Charakter des fertigen Systems

Das Zielsystem soll:

- **professionell, aber leichtgewichtig**
- **technisch sauber und klar strukturiert**
- **stark domänenorientiert**
- **sicher und performant**
- **leicht erweiterbar für neue Widgets**
- **architektonisch tragfähig für echte Produktivanforderungen**

Es wird sichtbar, dass dieses System nicht „irgendetwas anzeigt“, sondern bewusst **Inhalte auswählt**, **priorisiert**,
**authentifiziert**, **cached**, **schützt** und **bereitstellt**.

Das Zielbild steht für ein System, das heute PoC sein kann – und morgen ein echtes Produktfundament.